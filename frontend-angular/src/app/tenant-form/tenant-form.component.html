<div class="tenant-form-container">
  <mat-card class="form-card">
    <mat-card-header class="enhanced-header">
      <div class="header-content">
        <div class="title-section">
          <mat-icon class="header-icon">{{ isEditMode ? 'edit' : 'add_business' }}</mat-icon>
          <div class="title-text">
            <mat-card-title>{{ isEditMode ? 'Edit Tenant' : 'Create New Tenant' }}</mat-card-title>
            <mat-card-subtitle>{{ isEditMode ? 'Update the details for ' + tenant?.name : 'Add a new tenant to the platform' }}</mat-card-subtitle>
          </div>
        </div>
      </div>
    </mat-card-header>
    
    <mat-card-content class="enhanced-content">
      <form [formGroup]="tenantForm" (ngSubmit)="onSubmit()" class="tenant-form-grid">
        
        <mat-form-field appearance="outline">
          <mat-label>Tenant Name</mat-label>
          <input matInput formControlName="name" placeholder="e.g., Osun State Government">
          <mat-error>{{ getErrorMessage('name') }}</mat-error>
        </mat-form-field>
  
        <mat-form-field appearance="outline">
          <mat-label>State Code</mat-label>
          <input matInput formControlName="stateCode" placeholder="e.g., OS" maxlength="2" style="text-transform: uppercase;">
          <mat-error>{{ getErrorMessage('stateCode') }}</mat-error>
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width-field">
          <mat-label>Subdomain</mat-label>
          <input matInput formControlName="subdomain" placeholder="e.g., osun">
          <mat-hint *ngIf="isEditMode; else newHint">Subdomain cannot be changed after creation.</mat-hint>
          <ng-template #newHint><mat-hint>Lowercase letters, numbers, and hyphens only.</mat-hint></ng-template>
          <mat-error>{{ getErrorMessage('subdomain') }}</mat-error>
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width-field">
          <mat-label>Identity Source Validation URL</mat-label>
          <input matInput formControlName="validationUrl" placeholder="https://api.registry.gov/validate">
          <mat-hint>The full API endpoint for this tenant's source of truth.</mat-hint>
          <mat-error>{{ getErrorMessage('validationUrl') }}</mat-error>
        </mat-form-field>
  
        <mat-form-field appearance="outline" class="full-width-field">
          <mat-label>Description (Optional)</mat-label>
          <textarea matInput formControlName="description" placeholder="Brief description of the tenant..." rows="4"></textarea>
          <mat-error>{{ getErrorMessage('description') }}</mat-error>
        </mat-form-field>
      </form>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-stroked-button type="button" (click)="onCancel()" [disabled]="isLoading">
        Cancel
      </button>
      <button mat-flat-button class="primary-button" type="submit" [disabled]="tenantForm.invalid || isLoading" (click)="onSubmit()">
        <div class="button-content">
          <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
          <mat-icon *ngIf="!isLoading">{{ isEditMode ? 'save' : 'add' }}</mat-icon>
          <span>{{ isEditMode ? 'Update Tenant' : 'Create Tenant' }}</span>
        </div>
      </button>
    </mat-card-actions>
  </mat-card>
</div>